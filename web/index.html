<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
  <meta name="theme-color" content="#0a0a0a">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="Beatrix">
  <meta name="description" content="Beatrix night vision camera â€” live stream">
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/svg+xml" href="icons/icon.svg">
  <link rel="apple-touch-icon" href="icons/icon.svg">
  <link rel="stylesheet" href="style.css">
  <title>Beatrix Cam</title>
</head>
<body>
  <!-- Loading screen -->
  <div id="loading-screen" class="loading-screen">
    <div class="loading-content">
      <svg class="loading-icon" viewBox="0 0 80 80" width="80" height="80" aria-hidden="true">
        <circle cx="40" cy="40" r="30" fill="none" stroke="var(--accent)" stroke-width="1.5" opacity="0.3"/>
        <circle cx="40" cy="40" r="30" fill="none" stroke="var(--accent)" stroke-width="1.5"
                stroke-dasharray="140 60" class="loading-ring"/>
        <circle cx="40" cy="40" r="8" fill="var(--accent)" opacity="0.9">
          <animate attributeName="r" values="7;9;7" dur="2s" repeatCount="indefinite"/>
          <animate attributeName="opacity" values="0.9;0.5;0.9" dur="2s" repeatCount="indefinite"/>
        </circle>
      </svg>
      <div class="loading-title">BEATRIX</div>
      <div class="loading-subtitle">establishing connection</div>
    </div>
  </div>

  <!-- Main application -->
  <div id="app" class="app">
    <!-- Video container -->
    <div class="video-container" id="video-container">
      <video id="video" autoplay muted playsinline></video>

      <!-- Scanline overlay for night-vision feel -->
      <div class="scanlines" aria-hidden="true"></div>

      <!-- Vignette overlay -->
      <div class="vignette" aria-hidden="true"></div>

      <!-- Top bar -->
      <div class="overlay overlay-top" id="overlay-top">
        <div class="top-bar">
          <div class="top-left">
            <div class="brand">
              <span class="brand-name">BEATRIX</span>
              <span class="brand-sub">940nm IR</span>
            </div>
          </div>
          <div class="top-right">
            <div class="status-group">
              <span class="status-dot" id="status-dot" aria-label="Connection status"></span>
              <span class="status-text" id="status-text">CONNECTING</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Bottom bar -->
      <div class="overlay overlay-bottom" id="overlay-bottom">
        <div class="bottom-bar">
          <div class="bottom-left">
            <div class="timestamp" id="timestamp" aria-live="polite">--:--:--</div>
            <div class="stream-info" id="stream-info"></div>
          </div>
          <div class="bottom-right">
            <button class="btn" id="btn-fullscreen" aria-label="Toggle fullscreen" title="Fullscreen">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5">
                <path d="M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3"/>
              </svg>
            </button>
            <button class="btn" id="btn-snapshot" aria-label="Take snapshot" title="Snapshot">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5">
                <rect x="3" y="5" width="18" height="14" rx="2"/>
                <circle cx="12" cy="12" r="3.5"/>
                <circle cx="17.5" cy="7.5" r="1"/>
              </svg>
            </button>
            <button class="btn" id="btn-wakelock" aria-label="Toggle wake lock" title="Keep screen on">
              <svg viewBox="0 0 24 24" width="20" height="20" fill="none" stroke="currentColor" stroke-width="1.5">
                <circle cx="12" cy="12" r="4"/>
                <path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M4.93 19.07l1.41-1.41m11.32-11.32l1.41-1.41"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Connection error overlay -->
      <div class="error-overlay" id="error-overlay" hidden>
        <div class="error-content">
          <svg class="error-icon" viewBox="0 0 48 48" width="48" height="48" fill="none" stroke="var(--accent)" stroke-width="1.5">
            <circle cx="24" cy="24" r="20" opacity="0.3"/>
            <path d="M24 14v12M24 30v2"/>
          </svg>
          <div class="error-title" id="error-title">Connection Lost</div>
          <div class="error-message" id="error-message">Attempting to reconnect...</div>
          <button class="btn-retry" id="btn-retry">Retry Now</button>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
